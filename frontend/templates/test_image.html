{% extends "base.html" %}

{% block title %}Test Image - Exoplanet Hunter AI{% endblock %}

{% block content %}
<div class="container">
    <div class="text-center mb-5">
        <h1 class="display-4 fw-bold">
            <i class="bi bi-image text-star"></i>
            Image Test Page
        </h1>
        <p class="lead text-muted">
            Testing feature importance image loading
        </p>
    </div>

    <div class="card">
        <div class="card-header">
            <h4 class="mb-0">
                <i class="bi bi-bar-chart-line"></i> Feature Importance Visualization
            </h4>
        </div>
        <div class="card-body text-center">
            <img src="{{ url_for('static', filename='img/feature_importance.png') }}" 
                 alt="Feature Importance Chart" 
                 class="img-fluid rounded"
                 style="max-width: 100%; height: auto; box-shadow: 0 4px 20px rgba(139, 92, 246, 0.3);">
            
            <div class="mt-4">
                <p class="text-muted">
                    <i class="bi bi-info-circle"></i> 
                    Image path: <code>static/img/feature_importance.png</code>
                </p>
            </div>
        </div>
    </div>

    <!-- Additional test with direct path -->
    <div class="card mt-4">
        <div class="card-header">
            <h4 class="mb-0">
                <i class="bi bi-code-square"></i> Alternative Loading Method
            </h4>
        </div>
        <div class="card-body text-center">
            <img src="/static/img/feature_importance.png" 
                 alt="Feature Importance Chart (Direct Path)" 
                 class="img-fluid rounded"
                 style="max-width: 100%; height: auto; box-shadow: 0 4px 20px rgba(6, 182, 212, 0.3);">
            
            <div class="mt-4">
                <p class="text-muted">
                    <i class="bi bi-info-circle"></i> 
                    Direct path: <code>/static/img/feature_importance.png</code>
                </p>
            </div>
        </div>
    </div>

    <!-- Debug info -->
    <div class="card mt-4">
        <div class="card-header">
            <h4 class="mb-0">
                <i class="bi bi-bug"></i> Debug Information
            </h4>
        </div>
        <div class="card-body">
            <ul class="list-unstyled">
                <li class="mb-2">
                    <strong class="text-nebula">Expected File Location:</strong>
                    <code class="ms-2">your_project/frontend/static/img/feature_importance.png</code>
                </li>
                <li class="mb-2">
                    <strong class="text-star">URL Generated by Flask:</strong>
                    <code class="ms-2">{{ url_for('static', filename='img/feature_importance.png') }}</code>
                </li>
                <li class="mb-2">
                    <strong class="text-nebula">Image Status:</strong>
                    <span id="imageStatus" class="ms-2 badge bg-secondary">Checking...</span>
                </li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Check if image loads successfully
    document.addEventListener('DOMContentLoaded', () => {
        const img = document.querySelector('img');
        const statusBadge = document.getElementById('imageStatus');
        
        img.onload = () => {
            statusBadge.textContent = 'Loaded Successfully ✓';
            statusBadge.classList.remove('bg-secondary');
            statusBadge.classList.add('bg-success');
        };
        
        img.onerror = () => {
            statusBadge.textContent = 'Failed to Load ✗';
            statusBadge.classList.remove('bg-secondary');
            statusBadge.classList.add('bg-danger');
        };
    });
</script>
{% endblock %}
